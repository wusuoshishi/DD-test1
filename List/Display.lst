C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE DISPLAY
OBJECT MODULE PLACED IN .\Output\Display.obj
COMPILER INVOKED BY: D:\Program_Files\KEIL5_521A\C51\BIN\C51.EXE Application_Library\Display.c OMF2 OPTIMIZE(8,SPEED) BR
                    -OWSE INCDIR(.\Inc;.\User;.\Application_Library;.\Project) DEBUG PRINT(.\List\Display.lst) OBJECT(.\Output\Display.obj)

line level    source

   1          #include        "..\Application_Library\Global.h"
   2          //#include    <intrins.h>
   3          
   4          //调试时显示
   5          uchar   xdata   b_disp_test=0;
   6          uchar   xdata   b_disp_test2=0;
   7          
   8          uchar   data    b_dis_r18=0;
   9          uchar   data    b_dis_r28=0;
  10          uchar   data    b_dis_r38=0;
  11          uchar   data    b_dis_r48=0;
  12          uchar   data    b_dis_r58=0;
  13          uchar   data    b_dis_r68=0;
  14          uchar   data    b_dis_r78=0;
  15          uchar   data    b_dis_r88=0;
  16          
  17          uchar   xdata   b_r18=0;
  18          uchar   xdata   b_r28=0;
  19          uchar   xdata   b_r38=0;
  20          uchar   xdata   b_r48=0;
  21          uchar   xdata   b_r58=0;
  22          uchar   xdata   b_r68=0;
  23          uchar   xdata   b_r78=0;
  24          uchar   xdata   b_r88=0;
  25          
  26          bit             f_fanzhuan=0;
  27          
  28          bit             f_disp_yuyue=0;         //显示预约时间
  29          bit             f_disp_dingshi=0;               //显示功能时间
  30          bit             gf_flash=0;                     //闪烁，500ms
  31          bit             f_dp=0;                         //显示数码管中间冒号
  32          bit     f_dp_2=0;           //显示数码管中间冒号
  33          bit             f_dgtn=0;                  //转换选择位，为1则不查tab_num表
  34          uchar   xdata   gb_flashTime=0;
  35          
  36          uchar   xdata   b_led_slide1=0;
  37          
  38          uchar   data    b_disp_status=0;
  39          uchar   data    b_disp_rl=0;
  40          
  41          uchar   b_time_grade_cnt=0;//           0:档位,5:时间
  42          
  43          uchar   const code      tab_num[]=
  44          {
  45              c_num0_n,   //0
  46              c_num1_n,   //1
  47              c_num2_n,   //2
  48              c_num3_n,   //3
  49              c_num4_n,   //4
  50              c_num5_n,   //5
  51              c_num6_n,   //6
  52              c_num7_n,   //7
  53              c_num8_n,   //8
  54              c_num9_n,   //9
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 2   

  55              c_numA_n,   //A 10
  56              c_numb_n,   //B 11
  57              c_numC_n,   //C 12
  58              c_numd_n,   //D 13
  59              c_numE_n,   //E 14
  60              c_numF_n,   //F 15
  61              c_num10_n, //10 16
  62              c_nump_n,   //11 17
  63              c_numc_n,  //18 18
  64              c_numc_ding_n, // 19
  65              c_numH_n      //20
  66          };
  67          
  68          
  69          #if   c_disp_liushui
  70          void    liushui_liucheng1(void);
  71          #endif
  72          
  73          #if   c_disp_change
              uchar   change(uchar);  //数据映射
              #endif
  76          
  77          
  78          /*数码管显示相关*/
  79          void    smg_deal();     //数码管处理
  80          void    smg_deal_dingshi_1();   //数码管定时显示1
  81          void    smg_deal_dingshi_2();   //数码管定时显示2       
  82          void    smg_deal_yuyue_1();             //数码管预约显示1
  83          
  84          /*LED灯显示相关*/
  85          void    led_deal();     //LED灯处理
  86          void    led_deal_mode_one();//对应功能下的LED灯显示
  87          void    led_deal_ALL_OFF();     //LED灯全关
  88          void    led_deal_ALL_ON();      //LED灯全亮
  89          
  90          
  91          
  92          void    dispdata_clr();
  93          
  94          void    dispdata_mov();
  95          
  96          void    dispdata_set();
  97          
  98          
  99          
 100          
 101          /*-----------------------------------------------------------------
 102          函数名称： void display_deal(void)
 103          函数功能： 显示处理,时间基准10ms
 104          输入参数： 无
 105          返 回 值： 无
 106          -----------------------------------------------------------------*/
 107          void    display_deal()
 108          {
 109   1          dispdata_clr();             //显示清0
 110   1          
 111   1          if(!gf_check)
 112   1            dispdata_set();   //自检显示全亮
 113   1          else
 114   1          {
 115   2      
 116   2              //显示处理
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 3   

 117   2              smg_deal();   //数码管显示处理
 118   2              led_deal();   //LED灯显示处理
 119   2      
 120   2      
 121   2      
 122   2      
 123   2      
 124   2              #if 0                   //显示测试值，将你想要的显示的量赋给此变量
                      {
                          if(gf_flash)
                          {
                              f_led1_h; 
                              f_led2_h;
                          }
                                      else
                                      {
                              f_led3_h;
                                              f_led4_h;
                                      }
              
                          //b_r18=b_disp_test/16;
                          //b_r28=b_disp_test%16;
                          //b_r38=b_disp_test2/16;
                          //b_r48=b_disp_test2%16;
                          
                          #if 0 //显示温度
                              if(gb_wendu>99)
                              {
                                  b_r18=gb_wendu/100;
                                  b_r28=gb_wendu/10%10;
                                  b_r38=gb_wendu%10;
                              }
                              else
                              {
                                  b_r18=gb_wendu/10;
                                  b_r28=gb_wendu%10;
                                  b_r38=25;   //显示顶部c   
                              }
              
                          #endif    
              
                          #if 0    //显示温度AD
                              b_r18=b_temp/100;
                              b_r28=b_temp/10%10;
                              b_r38=b_temp%10;
              
                              b_r48=b_temp_1/100;
                              b_r58=b_temp_1/10%10;
                              b_r68=b_temp_1%10;
                          #endif
              
              
                          #if 0   //旋转开关显示
                          b_r18=b_key_value;
                          b_r28=codingSwitch_get();   //显示编码值
                          b_r38=codingSwitch_get2();   //H
              
                          b_r18=Target_wendu_1/10;
                          b_r28=Target_wendu_1%10;
                          b_r38=25;   //显示顶部c 
              
                          b_r48=Target_wendu_2/10;
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 4   

                          b_r58=Target_wendu_2%10;
                          b_r68=25;   //显示顶部c 
              
                          #endif
              
                                      #if 1 //显示触摸按键值值
              
                                                  b_r18=b_mode;
                                                      b_r28= b_key_value;
              
                                                      
              
              
                                      #endif
              
              
                      }
                              #endif
 197   2      
 198   2              if(!f_dgtn)     //转换选择位，为1则不查tab_num表
 199   2              {
 200   3                  //b_r18=tab_num[b_r18];
 201   3                  //b_r28=tab_num[b_r28];
 202   3                  //b_r38=tab_num[b_r38];
 203   3                  //b_r48=tab_num[b_r48];
 204   3      
 205   3                              /*数码管反着看*/
 206   3                  b_r18=tab_num[b_r18];
 207   3                  b_r28=tab_num[b_r28];
 208   3                  b_r38=tab_num[b_r38];
 209   3                  b_r48=tab_num[b_r48];
 210   3      
 211   3      
 212   3                  //b_r58=tab_num[b_r58];
 213   3                  //b_r68=tab_num[b_r68];       
 214   3                              //b_r78=tab_num[b_r78];   
 215   3                              //b_r88=tab_num[b_r88]; 
 216   3              }
 217   2                          if(f_dp)
 218   2                              b_r38|=0x80;    //反看第个点
 219   2                      
 220   2                      //if(f_dp)
 221   2                  //b_r28|=0x80;
 222   2                  //if(f_dp_2)
 223   2                      //b_r58|=0x80;
 224   2      
 225   2          }
 226   1      
 227   1          dispdata_mov();
 228   1      }
 229          
 230          void  dispdata_set()
 231          {
 232   1      #if     (c_TM1628_EN|| c_TM1629_EN)
                  uchar i,j;
              #if c_TM1629_EN
                  j=16;
              #endif
              #if c_TM1628_EN
                  j=14;
              #endif
                  for(i=0; i<j; i++)
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 5   

                     gb_disIcData[i]=0xff;
              #endif
 243   1          b_r18=0xff;
 244   1          b_r28=0xff;
 245   1          b_r38=0xff;
 246   1          b_r48=0xff;
 247   1          b_r58=0xff;
 248   1          b_r68=0xff;
 249   1          b_r78=0xff;
 250   1          b_r88=0xff;
 251   1      }
 252          
 253          
 254          /*显示清0*/
 255          void  dispdata_clr()
 256          {
 257   1      #if     (c_TM1628_EN|| c_TM1629_EN)
                  uchar i,j;
              #if c_TM1629_EN
                  j=16;
              #endif
              #if c_TM1628_EN
                  j=14;
              #endif
                  for(i=0; i<j; i++)
                     gb_disIcData[i]=0;
              #endif
 268   1          b_r18=0;
 269   1          b_r28=0;
 270   1          b_r38=0;
 271   1          b_r48=0;
 272   1          b_r58=0;
 273   1          b_r68=0;
 274   1          b_r78=0;
 275   1          b_r88=0;
 276   1          f_dgtn=0;
 277   1          f_dp=0;
 278   1          f_dp_2=0;
 279   1      }
 280          
 281          void  dispdata_mov()
 282          {
 283   1              /*用于翻转的数码管*/
 284   1          b_dis_r18=b_r48;
 285   1          b_dis_r28=b_r38;
 286   1          b_dis_r38=b_r28;
 287   1          b_dis_r48=b_r18;
 288   1      
 289   1          b_dis_r58=b_r58;
 290   1          b_dis_r68=b_r68;
 291   1          b_dis_r78=b_r78;
 292   1          b_dis_r88=b_r88;
 293   1          
 294   1      #if     (c_TM1628_EN|| c_TM1629_EN)
                  if(gf_check)
                  {
                    gb_disIcData[9]=change(b_r48);
                    gb_disIcData[1]=change(b_r38);
                    gb_disIcData[3]=change(b_r28);
                    gb_disIcData[5]=change(b_r18);
                    if(f_dp)
                      gb_disIcData[9]|=c_bit0;
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 6   

                    
                    if(b_r58&0x01)
                        gb_disIcData[6]|=c_bit0;
                    if(b_r58&0x02)
                        gb_disIcData[6]|=c_bit1;
                    if(b_r58&0x04)
                        gb_disIcData[6]|=c_bit2;
                    if(b_r58&0x08)
                        gb_disIcData[6]|=c_bit6;
                    if(b_r58&0x10)
                        gb_disIcData[6]|=c_bit7;
                    if(b_r58&0x20)
                        gb_disIcData[7]|=c_bit0;
                    if(b_r58&0x40)
                        gb_disIcData[7]|=c_bit1;
                    if(b_r58&0x80)
                        gb_disIcData[6]|=c_bit3;
                  }    
              #endif
 322   1      }
 323          
 324          /*LED灯显示处理*/
 325          void  led_deal()
 326          {       
 327   1              /*报错下LED灯显示*/
 328   1              if(b_warning)
 329   1              {
 330   2                      /*LED灯闪烁*/
 331   2                      if(gf_flash)
 332   2                              led_deal_ALL_ON();//LED灯全亮
 333   2              }
 334   1              else
 335   1              {       
 336   2                      /*设置模式下的LED显示*/
 337   2                      if(f_mjs_set)
 338   2                      {
 339   3                              /*LED灯闪烁*/
 340   3                              if(gf_flash || b_mjs_set_sec<1)
 341   3                                      led_deal_mode_one();    //对应功能下的LED灯显示
 342   3                      }
 343   2                      /*非设置摸下的LED显示*/
 344   2                      else
 345   2                      {
 346   3                              if(b_force_flash_cnt<50)
 347   3                              {
 348   4                                      if(gf_flash)
 349   4                                              led_deal_mode_one();    //对应功能下的LED灯显示
 350   4                                      else
 351   4                                      {
 352   5                                              b_r58=0;
 353   5                                      }
 354   4                              }
 355   3                              else
 356   3                              {
 357   4                                      led_deal_mode_one();    //对应功能下的LED灯显示
 358   4                              }
 359   3                              
 360   3                      }
 361   2                      
 362   2              }
 363   1      }
 364          
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 7   

 365          
 366          /*对应功能下的LED灯显示*/
 367          void    led_deal_mode_one()
 368          {
 369   1              /*功能LED显示*/
 370   1              switch(b_mode)
 371   1          {
 372   2          case 1:
 373   2              f_led1_h;
 374   2              break;
 375   2          case 2:
 376   2              f_led2_h;
 377   2              break;
 378   2          case 3:
 379   2              f_led3_h;
 380   2              break;
 381   2          case 4:
 382   2                  f_led4_h;
 383   2              break;
 384   2          case 5:
 385   2              f_led5_h;
 386   2              break;
 387   2          case 6:
 388   2                  f_led6_h;
 389   2              break;
 390   2      
 391   2      
 392   2          default:
 393   2              break;
 394   2          }
 395   1      }
 396          
 397          /*LED灯全亮*/
 398          void led_deal_ALL_ON()
 399          {
 400   1              f_led1_h;
 401   1              f_led2_h;
 402   1              f_led3_h;
 403   1              f_led4_h;
 404   1              f_led5_h;
 405   1              f_led6_h;
 406   1      }
 407          
 408          /*LED灯全灭*/
 409          void led_deal_ALL_OFF()
 410          {
 411   1              ;
 412   1              //f_led1_l;
 413   1              //f_led2_l;
 414   1              //f_led3_l;
 415   1              //f_led4_l;
 416   1      }
 417          
 418          
 419          /*数码管显示处理*/
 420          void  smg_deal()
 421          {
 422   1              ////清显示
 423   1          b_r18=0x10;
 424   1          b_r28=0x10;
 425   1          b_r38=0x10;
 426   1              b_r48=0x10;
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 8   

 427   1          //b_r58=0x10;
 428   1          //b_r68=0x10;
 429   1          //b_r78=0x10;
 430   1              //b_r88=0x10;
 431   1      //
 432   1              //f_dp=0;
 433   1              //f_dgtn=1;     //转换选择位，为1则不查tab_num表
 434   1              /***报错显示***/
 435   1              if(b_warning)
 436   1              {
 437   2              //报错显示
 438   2                      b_r18=0x10;
 439   2              b_r28=0x0e;     //E
 440   2                      if(b_warning & 0x01)
 441   2                      b_r38=1;        //开路
 442   2                      if(b_warning & 0x02)
 443   2                      b_r38=2;        //短路
 444   2                      if(b_warning & 0x04)
 445   2                      b_r38=3;        //超温          
 446   2                      b_r48=0x10;                             
 447   2         }
 448   1         /*待机状态下显示*/
 449   1         else if(!f_mjs_set && !f_mjs_dingshi && !f_mjs_yuyue && !f_mjs_down && !f_mjs_power)
 450   1         {
 451   2                      //待机状态下显示00
 452   2                      b_r18=0;
 453   2              b_r28=0;
 454   2              b_r38=0;
 455   2                      b_r48=0;
 456   2                      f_dp=1;  //显示小数点
 457   2         }
 458   1         else
 459   1         {
 460   2                      /*设置状态下显示*/
 461   2                      if(f_mjs_set)
 462   2                      {       
 463   3                              /*设置状态下的预约显示*/
 464   3                              if(f_disp_yuyue)
 465   3                              {
 466   4                                      smg_deal_yuyue_1();     //预约显示
 467   4                              }
 468   3                              /*设置状态下,正常设置状态*/
 469   3                              else
 470   3                              {
 471   4                                      smg_deal_dingshi_1();   //定时显示1
 472   4                              }
 473   3      
 474   3                      }
 475   2                      /*非设置状态下显示*/
 476   2                      else
 477   2                      {
 478   3                              /*非设置状态下的预约显示*/
 479   3                              if(f_disp_yuyue)
 480   3                              {
 481   4                                      smg_deal_yuyue_1();     //预约显示
 482   4                              }
 483   3                              else
 484   3                              {
 485   4                                      if(b_force_flash_cnt<50)
 486   4                                      {
 487   5                                              if(gf_flash)
 488   5                                                      smg_deal_dingshi_2();//定时显示2
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 9   

 489   5                                              else
 490   5                                              {
 491   6                                                      b_r18=0x10;
 492   6                                                      b_r28=0x10;
 493   6                                                      b_r38=0x10;
 494   6                                                      b_r48=0x10;
 495   6                                              }
 496   5                                      }
 497   4                                      else
 498   4                                      {
 499   5                                              smg_deal_dingshi_2();//定时显示2
 500   5                                      }
 501   4                                      
 502   4                                      /*特殊处理*/
 503   4                                      if(f_mjs_yuyue && f_clock_key==0&&gf_flash)
 504   4                                              f_dp=1;  //显示小数点
 505   4      
 506   4                              }
 507   3                      }
 508   2      
 509   2      /*
 510   2              if(f_sys_power_1)
 511   2              {
 512   2                  if(b_NOW_or_Target_cnt>=c_IS_disp_NOW) //0:目标温度,5:现在温度
 513   2                  {
 514   2                      //显示现在温度
 515   2                      b_r18=gb_wendu/10;
 516   2                      b_r28=gb_wendu%10;
 517   2                      b_r38=25;   //显示顶部c
 518   2                      if(gf_flash)
 519   2                          f_dp=1;  
 520   2                  }
 521   2                  else
 522   2                  {
 523   2                      //显示目标温度  
 524   2                      b_r18=Target_wendu_1/10;
 525   2                      b_r28=Target_wendu_1%10;
 526   2                      b_r38=25;   //显示顶部c
 527   2                  }
 528   2       
 529   2              }
 530   2              else
 531   2              {
 532   2                  //显示---
 533   2                  b_r18=0x11;
 534   2                  b_r28=0x11;
 535   2                  b_r38=0x11;
 536   2              }   */
 537   2          }
 538   1      
 539   1      }
 540          
 541          
 542          #if   c_disp_change
              
              uchar   change(uchar change_data)
              {
                  uchar       buffer=0;
                  if(change_data & 0x01)
                      buffer |= 0x80;
                  if(change_data & 0x02)
                      buffer |= 0x40;
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 10  

                        if(change_data & 0x04)
                            buffer |= 0x20;
                  if(change_data & 0x08)
                      buffer |= 0x10;
                  if(change_data & 0x10)
                      buffer |= 0x08;
                  if(change_data & 0x20)
                      buffer |= 0x04;
                  if(change_data & 0x40)
                      buffer |= 0x02;
                        if(change_data & 0x80)
                      buffer |= 0x01;
                  return (buffer);
              }
              
              #endif
 567          
 568          
 569          
 570          #if   c_disp_liushui
 571          /*-----------------------------------------------------------------
 572          函数名称： void liushui_liucheng1(void)
 573          函数功能： 流水灯处理
 574          输入参数： 无
 575          返 回 值： 无
 576          -----------------------------------------------------------------*/
 577          void    liushui_liucheng1()
 578          {
 579   1          uchar       xdata   b_share_cnt1=0;
 580   1          uchar       xdata   b_share_cnt2=0;
 581   1          uchar       xdata   b_share_cnt3=0;
 582   1          b_share_cnt1 = 0x0f;
 583   1          b_share_cnt2 = 0x00;
 584   1          for(b_share_cnt3 = 0x00; b_share_cnt3 < b_led_slide1; b_share_cnt3 ++)      //b_led_slide1
 585   1          {
 586   2              b_share_cnt2 <<= 0x01;
 587   2              if(b_share_cnt1 & 0x80)
 588   2                  b_share_cnt2 |= 0x01;
 589   2              b_share_cnt1 <<= 0x01;
 590   2              if(b_share_cnt2 & 0x10)
 591   2                  b_share_cnt1 |= 0x01;
 592   2          }
 593   1          if(b_share_cnt1 & 0x01)
 594   1              b_r18 |= 0x01;
 595   1          if(b_share_cnt1 & 0x02)
 596   1              b_r28 |= 0x01;
 597   1          if(b_share_cnt1 & 0x04)
 598   1              b_r38 |= 0x01;
 599   1          if(b_share_cnt1 & 0x08)
 600   1              b_r48 |= 0x01;
 601   1          if(b_share_cnt1 & 0x10)
 602   1              b_r48 |= 0x02;
 603   1          if(b_share_cnt1 & 0x20)
 604   1              b_r48 |= 0x04;
 605   1          if(b_share_cnt1 & 0x40)
 606   1              b_r48 |= 0x08;
 607   1          if(b_share_cnt1 & 0x80)
 608   1              b_r38 |= 0x08;
 609   1          if(b_share_cnt2 & 0x01)
 610   1              b_r28 |= 0x08;
 611   1          if(b_share_cnt2 & 0x02)
 612   1              b_r18 |= 0x08;
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 11  

 613   1          if(b_share_cnt2 & 0x04)
 614   1              b_r18 |= 0x10;
 615   1          if(b_share_cnt2 & 0x08)
 616   1              b_r18 |= 0x20;
 617   1      }
 618          #endif
 619          
 620          
 621          /*-----------------------------------------------------------------
 622          函数名称： void led_scan(void)
 623          函数功能： LED扫描
 624          输入参数： 无
 625          返 回 值： 无
 626          -----------------------------------------------------------------*/
 627          
 628          void led_scan()
 629          {
 630   1      
 631   1      #if             c_disp_com
              
                  unsigned char b_disp_tmp=0;
              
                  p_com1in;
                  p_com2in;
                  p_com3in;
                  p_com4in;
                  p_com5in;
                  p_com6in;
                  p_com7in;
                  p_com8in;
              
                  p_seg1in;
                  p_seg2in;
                  p_seg3in;
                  p_seg4in;
                  p_seg5in;
                  p_seg6in;
                  p_seg7in;
                  p_seg8in;
              
              
                  b_disp_status++;
                  if(b_disp_status>=12)  
                  {
                    b_disp_status=0;
                  }
              
                  if(b_disp_status<=9)
                  {
                  
                  switch(b_disp_status)
                  {
                  case 0:
                      b_disp_tmp=b_dis_r18;
                      p_com1l;
                      p_com1out;
                      p_com1l;
                      break;
                  case 1:
                      b_disp_tmp=b_dis_r28;
                      p_com2l;
                      p_com2out;
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 12  

                      p_com2l;
                      break;
                  case 2:
                      b_disp_tmp=b_dis_r38;
                      p_com3l;
                      p_com3out;
                      p_com3l;
                      break;
                  case 3:
                      b_disp_tmp=b_dis_r48;
                      p_com4l;
                      p_com4out;
                      p_com4l;
                      break;
                  case 4:
                      b_disp_rl=0x01;
                      p_seg1l;
                      p_seg1out;
                      p_seg1l;
                      break;
                  case 5:
                      b_disp_rl=0x08;
                      p_seg4l;
                      p_seg4out;
                      p_seg4l;
                      break;
                  case 6:
                      b_disp_rl=0x10;
                      p_seg5l;
                      p_seg5out;
                      p_seg5l;
                      break;
                  case 7:
                      b_disp_rl=0x20;
                      p_seg6l;
                      p_seg6out;
                      p_seg6l;
                      break;
                  default:
                      b_disp_tmp=0x00;
                      break;
                  }
                  
              
                  if(b_disp_status==8)
                  {
                      if(b_dis_r18&c_bit7)
                      {
                          p_seg8h;
                          p_seg8out;
                          p_seg8h;
                          p_com1l;
                          p_com1out;
                          p_com1l;
                      }
                  }
                  else if(b_disp_status<=3)
                  {
                    if(b_disp_tmp&c_bit1)
                    {
                        p_seg2h;
                        p_seg2out;
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 13  

                        p_seg2h;
                    }
                    if(b_disp_tmp&c_bit2)
                    {
                        p_seg3h;
                        p_seg3out;
                        p_seg3h;
                    }
                    if(b_disp_tmp&c_bit6)
                    {
                        p_seg7h;
                        p_seg7out;
                        p_seg7h;
                    }
                  }
                  else
                  {
                    if(b_dis_r18&b_disp_rl)
                    {
                        p_com1h;
                        p_com1out;
                        p_com1h;
                    }
                    if(b_dis_r28&b_disp_rl)
                    {
                        p_com2h;
                        p_com2out;
                        p_com2h;
                    }
                    if(b_dis_r38&b_disp_rl)
                    {
                        p_com3h;
                        p_com3out;
                        p_com3h;
                    }
                    if(b_dis_r48&b_disp_rl)
                    {
                        p_com4h;
                        p_com4out;
                        p_com4h;
                    }
                  }
              
                  }
              
                  
              #endif
 784   1      
 785   1      //电阻在COM口，一次扫8个COM口
 786   1      #if             c_disp_seg
              
                  unsigned char b_disp_tmp=0;
              
                  disp_comh;
                  disp_segl;
              
                  b_disp_rl=b_disp_rl<<0x01;
              
                  b_disp_status++;
                  if(b_disp_status>=c_ledScan_cnt)
                  {
                      b_disp_status=0;
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 14  

                      b_disp_rl=0x01;
                  }
              
              
                  switch(b_disp_status)
                  {
                  case 0:
                      //p_seg1h;
                      p_seg4h;
                      break;
                  case 1:
                      //p_seg2h;    
                      p_seg5h;
                      break;
                  case 2:
                      //p_seg3h;
                      p_seg6h;       
                      break;
                  case 3:
                      //p_seg4h;
                      p_seg1h;        
                      break;
                  case 4:
                      //p_seg5h;
                      p_seg2h;        
                      break;
                  case 5:
                      //p_seg6h;
                      p_seg3h;        
                      break;
                  case 6:
                      //p_seg7h;
                      p_seg7h;        
                      break;
                  case 7:
                      p_seg8h;
                      break;
                  default:
                      break;
                  }
              
                  if(b_dis_r18&b_disp_rl)
                      //p_com1l;
                      p_com4l;
                  if(b_dis_r28&b_disp_rl)
                      //p_com2l;
                      p_com3l;
                  if(b_dis_r38&b_disp_rl)
                      //p_com3l;
                      p_com2l;
                  if(b_dis_r48&b_disp_rl)
                      //p_com4l;
                      p_com1l;
                  if(b_dis_r58&b_disp_rl)
                      p_com5l;
                  if(b_dis_r68&b_disp_rl)
                      p_com6l;
                  if(b_dis_r78&b_disp_rl)
                      p_com7l;
                  if(b_dis_r88&b_disp_rl)
                      p_com8l;
              #endif
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 15  

 861   1      
 862   1      
 863   1      #if     c_disp_comcom
              
                  unsigned char b_disp_buf=0;
              
                  //p_com1in;
                  //p_com2in;
                  //p_com3in;
                  //p_com4in;
                  //p_com5in;
                  //p_com6in;
                  //p_com7in;
                  //p_com8in;
              
                  p_segA1in;
                  p_segA2in;
                  p_segA3in;
                  p_segA4in;
                  p_segA5in;
                  p_segA6in;
                  p_segA7in;
              
                  p_segB1in;
                  p_segB2in;
                  p_segB3in;
                  p_segB4in;
                  p_segB5in;
                  p_segB6in;
                  p_segB7in;
              
              
                  b_disp_status ++;
                  if(b_disp_status>=c_ledScan_cnt)
                      b_disp_status=0;
              
                  f_fanzhuan = 0;   //f_fanzhuan = 1 com h seg l
                  //f_fanzhuan = 0 com l seg h
              
                  b_disp_buf = (b_disp_status >> 0x03) & 0x07;
                  if(b_disp_buf>=4)
                      f_fanzhuan = 1;
                  if(b_disp_status<0x40)
                  {
              
                      switch((b_disp_status >> 0x03) & 0x07)
                      {
                      case 0x00 :
                          if(f_fanzhuan)
                              p_com1h;
                          else
                              p_com1l;
                          p_com1out;
                          if(f_fanzhuan)
                              p_com1h;
                          else
                              p_com1l;
                          b_disp_buf = b_dis_r18;
                          break;
                      case 0x01 :
                          if(f_fanzhuan)
                              p_com2h;
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 16  

                          else
                              p_com2l;
                          p_com2out;
                          if(f_fanzhuan)
                              p_com2h;
                          else
                              p_com2l;
                          b_disp_buf = b_dis_r28;
                          break;
                      case 0x02 :
                          if(f_fanzhuan)
                              p_com3h;
                          else
                              p_com3l;
                          p_com3out;
                          if(f_fanzhuan)
                              p_com3h;
                          else
                              p_com3l;
                          b_disp_buf = b_dis_r38;
                          break;
                      case 0x03 :
                          if(f_fanzhuan)
                              p_com4h;
                          else
                              p_com4l;
                          p_com4out;
                          if(f_fanzhuan)
                              p_com4h;
                          else
                              p_com4l;
                          b_disp_buf = b_dis_r48;
                          break;
                      case 0x04 :
                          if(f_fanzhuan)
                              p_com5h;
                          else
                              p_com5l;
                          p_com5out;
                          if(f_fanzhuan)
                              p_com5h;
                          else
                              p_com5l;
                          b_disp_buf = b_dis_r58;
                          break;
                      case 0x05 :
                          if(f_fanzhuan)
                              p_com6h;
                          else
                              p_com6l;
                          p_com6out;
                          if(f_fanzhuan)
                              p_com6h;
                          else
                              p_com6l;
                          b_disp_buf = b_dis_r68;
                          break;
                      case 0x06 :
                          if(f_fanzhuan)
                              p_com7h;
                          else
                              p_com7l;
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 17  

                          p_com7out;
                          if(f_fanzhuan)
                              p_com7h;
                          else
                              p_com7l;
                          b_disp_buf = b_dis_r78;
                          break;
                      case 0x07 :
                          if(f_fanzhuan)
                              p_com8h;
                          else
                              p_com8l;
                          p_com8out;
                          if(f_fanzhuan)
                              p_com8h;
                          else
                              p_com8l;
                          b_disp_buf = b_dis_r88;
                          break;
                      default :
                          b_disp_buf = 0x00;
                          break;
                      }
              
                      switch(b_disp_status & 0x07)
                      {
                      case 0x00 :
                          if(f_fanzhuan)
                              p_seg1h;
                          else
                              p_seg1l;
                          p_seg1out;
                          if(b_disp_buf & 0x01)
                          {
                              if(f_fanzhuan)
                                  p_seg1l;
                              else
                                  p_seg1h;
                          }
                          else
                          {
                              if(f_fanzhuan)
                                  p_seg1h;
                              else
                                  p_seg1l;
                          }
                          break;
                      case 0x01 :
                          if(f_fanzhuan)
                              p_seg2h;
                          else
                              p_seg2l;
                          p_seg2out;
                          if(b_disp_buf & 0x02)
                          {
                              if(f_fanzhuan)
                                  p_seg2l;
                              else
                                  p_seg2h;
                          }
                          else
                          {
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 18  

                              if(f_fanzhuan)
                                  p_seg2h;
                              else
                                  p_seg2l;
                          }
                          break;
                      case 0x02 :
                          if(f_fanzhuan)
                              p_seg3h;
                          else
                              p_seg3l;
                          p_seg3out;
                          if(b_disp_buf & 0x04)
                          {
                              if(f_fanzhuan)
                                  p_seg3l;
                              else
                                  p_seg3h;
                          }
                          else
                          {
                              if(f_fanzhuan)
                                  p_seg3h;
                              else
                                  p_seg3l;
                          }
                          break;
                      case 0x03 :
                          if(f_fanzhuan)
                              p_seg4h;
                          else
                              p_seg4l;
                          p_seg4out;
                          if(b_disp_buf & 0x08)
                          {
                              if(f_fanzhuan)
                                  p_seg4l;
                              else
                                  p_seg4h;
                          }
                          else
                          {
                              if(f_fanzhuan)
                                  p_seg4h;
                              else
                                  p_seg4l;
                          }
                          break;
                      case 0x04 :
                          if(f_fanzhuan)
                              p_seg5h;
                          else
                              p_seg5l;
                          p_seg5out;
                          if(b_disp_buf & 0x10)
                          {
                              if(f_fanzhuan)
                                  p_seg5l;
                              else
                                  p_seg5h;
                          }
                          else
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 19  

                          {
                              if(f_fanzhuan)
                                  p_seg5h;
                              else
                                  p_seg5l;
                          }
                          break;
                      case 0x05 :
                          if(f_fanzhuan)
                              p_seg6h;
                          else
                              p_seg6l;
                          p_seg6out;
                          if(b_disp_buf & 0x20)
                          {
                              if(f_fanzhuan)
                                  p_seg6l;
                              else
                                  p_seg6h;
                          }
                          else
                          {
                              if(f_fanzhuan)
                                  p_seg6h;
                              else
                                  p_seg6l;
                          }
                          break;
                      case 0x06 :
                          if(f_fanzhuan)
                              p_seg7h;
                          else
                              p_seg7l;
                          p_seg7out;
                          if(b_disp_buf & 0x40)
                          {
                              if(f_fanzhuan)
                                  p_seg7l;
                              else
                                  p_seg7h;
                          }
                          else
                          {
                              if(f_fanzhuan)
                                  p_seg7h;
                              else
                                  p_seg7l;
                          }
                          break;
                      case 0x07 :
                          if(f_fanzhuan)
                              p_seg8h;
                          else
                              p_seg8l;
                          p_seg8out;
                          if(b_disp_buf & 0x80)
                          {
                              if(f_fanzhuan)
                                  p_seg8l;
                              else
                                  p_seg8h;
                          }
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 20  

                          else
                          {
                              if(f_fanzhuan)
                                  p_seg8h;
                              else
                                  p_seg8l;
                          }
                          break;
                      default :
                          break;
                      }
                  }
              
              
              #endif
1186   1      
1187   1      #if     c_disp_comseg
              
                  unsigned char b_disp_buf=0;
              
                  p_com1h;
                  p_com2h;
                  p_com3h;
                  p_com4h;
                  p_com5h;
                  p_com6h;
                  p_com7h;
                  p_com8h;
              
                  p_seg1l;
                  p_seg2l;
                  p_seg3l;
                  p_seg4l;
                  p_seg5l;
                  p_seg6l;
                  p_seg8l;
                  p_seg7l;
              
              
                  b_disp_status ++;
                  if(b_disp_status>=c_ledScan_cnt)
                      b_disp_status=0;
              
                  if(b_disp_status < 0x40)
                  {
                      switch((b_disp_status >> 0x03) & 0x07)
                      {
                      case 0x00 :
                          p_com1l;
                          b_disp_buf = b_dis_r18;
                          break;
                      case 0x01 :
                          p_com2l;
                          b_disp_buf = b_dis_r28;
                          break;
                      case 0x02 :
                          p_com3l;
                          b_disp_buf = b_dis_r38;
                          break;
                      case 0x03 :
                          p_com4l;
                          b_disp_buf = b_dis_r48;
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 21  

                          break;
                      case 0x04 :
                          p_com5l;
                          b_disp_buf = b_dis_r58;
                          break;
                      case 0x05 :
                          p_com6l;
                          b_disp_buf = b_dis_r68;
                          break;
                      case 0x06 :
                          p_com7l;
                          b_disp_buf = b_dis_r78;
                          break;
                      case 0x07 :
                          p_com8l;
                          b_disp_buf = b_dis_r88;
                          break;
                      default :
                          b_disp_buf = 0x00;
                          break;
                      }
              
                      switch(b_disp_status & 0x07)
                      {
                      case 0x00 :
                          if(b_disp_buf & 0x01)
                              p_seg1h;
                          break;
                      case 0x01 :
                          if(b_disp_buf & 0x02)
                              p_seg2h;
                          break;
                      case 0x02 :
                          if(b_disp_buf & 0x04)
                              p_seg3h;
                          break;
                      case 0x03 :
                          if(b_disp_buf & 0x08)
                              p_seg4h;
                          break;
                      case 0x04 :
                          if(b_disp_buf & 0x10)
                              p_seg5h;
                          break;
                      case 0x05 :
                          if(b_disp_buf & 0x20)
                              p_seg6h;
                          break;
                      case 0x06 :
                          if(b_disp_buf & 0x40)
                              p_seg7h;
                          break;
                      case 0x07 :
                          if(b_disp_buf & 0x80)
                              p_seg8h;
                          break;
                      default :
                          break;
                      }
                  }
              
              #endif
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 22  

1295   1      
1296   1      
1297   1      
1298   1      #if     c_disp_comcom_qi
              
              
                  unsigned char b_disp_buf=0;
              
              //    p_com1l;
              //    p_com2l;
              //    p_com3l;
              //    p_com4l;
              //    p_com5l;
              //    p_com6l;
              //    p_com7l;
              //    p_com8l;
              
                  //p_seg1l;
                  //p_seg2l;
                  //p_seg3l;
                  //p_seg4l;
                  //p_seg5l;
                  //p_seg6l;
                  //p_seg7l;
                  //p_seg8l;
                  //p_seg9l;
                  //p_seg10l;
              
               
                  //用到的口都置为输入
                  p_segA1in;
                  p_segA2in;
                  p_segA3in;
                  p_segA4in;
                  p_segA5in;
                  p_segA6in;
                  p_segA7in;
              
                  p_segB1in;
                  p_segB2in;
                  p_segB3in;
                  p_segB4in;
                  p_segB5in;
                  p_segB6in;
                  p_segB7in;
              
                  p_com1in;
                  b_disp_status ++;
                  if(b_disp_status>=c_ledScan_cnt)
                      b_disp_status=0;
              
              
                  switch (b_disp_status)
                  {
                      case 0 :    //51
                          if(b_dis_r18 & 0x01)
                          {
                              p_segA5out;
                              p_segA5h;
                              p_segA1out;
                              p_segA1l;
                          }
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 23  

                          if(b_dis_r48 & 0x01)
                          {
                              p_segB5out;
                              p_segB5h;
                              p_segB1out;
                              p_segB1l;
                          }
                          break;
                      case 1 :    //52
                          if(b_dis_r18 & 0x02)
                          {
                              p_segA5out;
                              p_segA5h;
                              p_segA2out;
                              p_segA2l;
                          }
                          if(b_dis_r48 & 0x02)
                          {
                              p_segB5out;
                              p_segB5h;
                              p_segB2out;
                              p_segB2l;
                          }
                          break;
                      case 2 :    //53
                          if(b_dis_r18 & 0x04)
                          {
                              p_segA5out;
                              p_segA5h;
                              p_segA3out;
                              p_segA3l;
                          }
                          if(b_dis_r48 & 0x04)
                          {
                              p_segB5out;
                              p_segB5h;
                              p_segB3out;
                              p_segB3l;
                          }
                          break;
                      case 3 :    //54
                          if(b_dis_r18 & 0x08)
                          {
                              p_segA5out;
                              p_segA5h;
                              p_segA4out;
                              p_segA4l;
                          }
                          if(b_dis_r48 & 0x08)
                          {
                              p_segB5out;
                              p_segB5h;
                              p_segB4out;
                              p_segB4l;
                          }            
                          break;
                      case 4 :    //15
                          if(b_dis_r18 & 0x10)
                          {
                              p_segA1out;
                              p_segA1h;
                              p_segA5out;
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 24  

                              p_segA5l;
                          }
                          if(b_dis_r48 & 0x10)
                          {
                              p_segB1out;
                              p_segB1h;
                              p_segB5out;
                              p_segB5l;
                          }            
                          break;
                      case 5 :    //25
                          if(b_dis_r18 & 0x20)
                          {
                              p_segA2out;
                              p_segA2h;
                              p_segA5out;
                              p_segA5l;
                          }
                          if(b_dis_r48 & 0x20)
                          {
                              p_segB2out;
                              p_segB2h;
                              p_segB5out;
                              p_segB5l;
                          }            
                          break;
                      case 6 :    //35
                          if(b_dis_r18 & 0x40)
                          {
                              p_segA3out;
                              p_segA3h;
                              p_segA5out;
                              p_segA5l;
                          }
                          if(b_dis_r48 & 0x40)
                          {
                              p_segB3out;
                              p_segB3h;
                              p_segB5out;
                              p_segB5l;
                          }            
                          break;
                      case 7 :    //45
                          if(b_dis_r18 & 0x80)
                          {
                              p_segA4out;
                              p_segA5out;
                              p_segA4h;
                              p_segA5l;
                          }
                          if(b_dis_r48 & 0x80)
                          {
                              p_segB4out;
                              p_segB5out;
                              p_segB4h;
                              p_segB5l;
                          }            
                          break;
                      //第二位数码管
                      case 8 :    //61
                          if(b_dis_r28 & 0x01)
                          {
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 25  

                              p_segA6out;
                              p_segA6h;
                              p_segA1out;
                              p_segA1l;
                          }
                          if(b_dis_r58 & 0x01)
                          {
                              p_segB6out;
                              p_segB6h;
                              p_segB1out;
                              p_segB1l;
                          }            
                          break;
                      case 9 :    //62
                          if(b_dis_r28 & 0x02)
                          {
                              p_segA6out;
                              p_segA6h;                
                              p_segA2out;
                              p_segA2l;
                          }
                          if(b_dis_r58 & 0x02)
                          {
                              p_segB6out;
                              p_segB6h;                
                              p_segB2out;
                              p_segB2l;
                          }            
                          break;
                      case 10 :    //63
                          if(b_dis_r28 & 0x04)
                          {
                              p_segA6out;
                              p_segA6h;
                              p_segA3out;
                              p_segA3l;
                          }
                          if(b_dis_r58 & 0x04)
                          {
                              p_segB6out;
                              p_segB6h;
                              p_segB3out;
                              p_segB3l;
                          }            
                          break;
                      case 11 :    //64
                          if(b_dis_r28 & 0x08)
                          {
                              p_segA6out;
                              p_segA6h;
                              p_segA4out;
                              p_segA4l;
                          }
                          if(b_dis_r58 & 0x08)
                          {
                              p_segB6out;
                              p_segB6h;
                              p_segB4out;
                              p_segB4l;
                          }            
                          break;
                      case 12 :    //16
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 26  

                          if(b_dis_r28 & 0x10)
                          {
                              p_segA1out;
                              p_segA1h;
                              p_segA6out;
                              p_segA6l;
                          }
                          if(b_dis_r58 & 0x10)
                          {
                              p_segB1out;
                              p_segB1h;
                              p_segB6out;
                              p_segB6l;
                          }            
                          break;
                      case 13 :    //26
                          if(b_dis_r28 & 0x20)
                          {
                              p_segA2out;
                              p_segA2h;
                              p_segA6out;
                              p_segA6l;
                          }
                          if(b_dis_r58 & 0x20)
                          {
                              p_segB2out;
                              p_segB2h;
                              p_segB6out;
                              p_segB6l;
                          }
                          break;
                      case 14 :    //36
                          if(b_dis_r28 & 0x40)
                          {
                              p_segA3out;
                              p_segA3h;
                              p_segA6out;
                              p_segA6l; 
                          }
                          if(b_dis_r58 & 0x40)
                          {
                              p_segB3out;
                              p_segB3h;
                              p_segB6out;
                              p_segB6l; 
                          }            
                          break;
                      case 15 :    //46
                          if(b_dis_r28 & 0x80)
                          {
                              p_segA4out;
                              p_segA4h;
                              p_segA6out;
                              p_segA6l;
                          }
                          if(b_dis_r58 & 0x80)
                          {
                              p_segB4out;
                              p_segB4h;
                              p_segB6out;
                              p_segB6l;
                          }            
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 27  

                          break;
                      //第三位数码管
                      case 16 :    //71
                          if(b_dis_r38 & 0x01)
                          {
                              p_segA7out;
                              p_segA7h;
                              p_segA1out;
                              p_segA1l;
                          }
                          if(b_dis_r68 & 0x01)
                          {
                              p_segB7out;
                              p_segB7h;
                              p_segB1out;
                              p_segB1l;
                          }
                          break;
                      case 17 :    //72
                          if(b_dis_r38 & 0x02)
                          {
                              p_segA7out;
                              p_segA7h;
                              p_segA2out;
                              p_segA2l;
                          }
                          if(b_dis_r68 & 0x02)
                          {
                              p_segB7out;
                              p_segB7h;
                              p_segB2out;
                              p_segB2l;
                          }            
                          break;
                      case 18 :    //73
                          if(b_dis_r38 & 0x04)
                          {
                              p_segA7out;
                              p_segA7h;
                              p_segA3out;
                              p_segA3l;
                          }
                          if(b_dis_r68 & 0x04)
                          {
                              p_segB7out;
                              p_segB7h;
                              p_segB3out;
                              p_segB3l;
                          }            
                          break;
                      case 19 :    //74
                          if(b_dis_r38 & 0x08)
                          {
                              p_segA7out;
                              p_segA7h;
                              p_segA4out;
                              p_segA4l;
                          }
                          if(b_dis_r68 & 0x08)
                          {
                              p_segB7out;
                              p_segB7h;
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 28  

                              p_segB4out;
                              p_segB4l;
                          }                        
                          break;
                      case 20 :    //17
                          if(b_dis_r38 & 0x10)
                          {
                              p_segA1out;
                              p_segA1h;
                              p_segA7out;
                              p_segA7l;
                          }
                          if(b_dis_r68 & 0x10)
                          {
                              p_segB1out;
                              p_segB1h;
                              p_segB7out;
                              p_segB7l;
                          }            
                          break;
                      case 21 :    //27
                          if(b_dis_r38 & 0x20)
                          {
                              p_segA2out;
                              p_segA2h;
                              p_segA7out;
                              p_segA7l;
                          }
                          if(b_dis_r68 & 0x20)
                          {
                              p_segB2out;
                              p_segB2h;
                              p_segB7out;
                              p_segB7l;
                          }            
                          break;
                      case 22 :    //37
                          if(b_dis_r38 & 0x40)
                          {
                              p_segA3out;
                              p_segA3h;
                              p_segA7out;
                              p_segA7l;
                          }
                          if(b_dis_r68 & 0x40)
                          {
                              p_segB3out;
                              p_segB3h;
                              p_segB7out;
                              p_segB7l;
                          }            
                          break;
                      case 23 :    //47
                          if(b_dis_r38 & 0x80)
                          {
                              p_segA4out;
                              p_segA4h;
                              p_segA7out;
                              p_segA7l;
                          }
                          if(b_dis_r68 & 0x80)
                          {
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 29  

                              p_segB4out;
                              p_segB4h;
                              p_segB7out;
                              p_segB7l;
                          }            
                          break;
                      case 24 :    //LED1
                          if(b_dis_r78 & 0x01)
                          {
                              p_com1out;
                              p_com1h;
                              p_segA5out;
                              p_segA5l;
                          }       
                          break;
                      case 25 :    //LED2
                          if(b_dis_r78 & 0x02)
                          {
                              p_segA6out;
                              p_segA6h;
                              p_com1out;
                              p_com1l;
                          }       
                          break;        
                      case 26 :    //LED3
                          if(b_dis_r78 & 0x04)
                          {
                              p_com1out;
                              p_com1h;
                              p_segB5out;
                              p_segB5l;
                          }       
                          break; 
                      case 27 :    //LED4
                          if(b_dis_r78 & 0x08)
                          {
                              p_segB4out;
                              p_segB4h;
                              p_com1out;
                              p_com1l;
                          }       
                          break; 
                      case 28 :   //按键置输入
                          sw_scan_in();
                          break;
                      case 29 :   //按键检测
                          sw_scan();
                          break;        
              
                      default :
                          b_disp_buf = 0x00;
                          break;
                  }
                              
              #endif  
1784   1      
1785   1      
1786   1      
1787   1      #if     0
              
              
                  unsigned char b_disp_buf=0;
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 30  

              
              //    p_com1l;
              //    p_com2l;
              //    p_com3l;
              //    p_com4l;
              //    p_com5l;
              //    p_com6l;
              //    p_com7l;
              //    p_com8l;
              
                  //p_seg1l;
                  //p_seg2l;
                  //p_seg3l;
                  //p_seg4l;
                  //p_seg5l;
                  //p_seg6l;
                  //p_seg7l;
                  //p_seg8l;
                  //p_seg9l;
                  //p_seg10l;
              
               
                  //用到的口都置为输入
                  p_seg1in;
                  p_seg2in;
                  p_seg3in;
                  p_seg4in;
                  p_seg5in;
                  p_seg6in;
                  p_seg7in;
              
                  b_disp_status ++;
                  if(b_disp_status>=c_ledScan_cnt)
                      b_disp_status=0;
              
              
                  switch (b_disp_status)
                  {
                      //case 0 :    //LED1 14
                      //case 1 :    //LED2 15
                              case 0 :    
                          if(b_dis_r18 & 0x01)
                          {
                              p_seg1out;
                              p_seg1h;
                              p_seg4out;
                              p_seg4l;
                          }
                                      //LED_POWER();
                              //break;
                      //case 1 :    //LED2 15
                          if(b_dis_r18 & 0x02)
                          {
                              p_seg1out;
                              p_seg1h;
                              p_seg5out;
                              p_seg5l;
                          }
                                      LED_POWER();
                          break;
                      //case 2 :    //LED3 51
                      //case 3 :    //LED4 41
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 31  

                              case 1 :
                          if(b_dis_r18 & 0x04)
                          {
                              p_seg5out;
                              p_seg5h;
                              p_seg1out;
                              p_seg1l;
                          }
                                      //LED_POWER();
                          //break;
                      //case 3 :    //LED4 41
                          if(b_dis_r18 & 0x08)
                          {
                              p_seg4out;
                              p_seg4h;
                              p_seg1out;
                              p_seg1l;
                          }
                                      //LED_POWER();
                          break;         
                      //case 4 :    //LED5 24
                      //case 5 :    //LED6 25
                              case 2 :
                          if(b_dis_r18 & 0x10)
                          {
                              p_seg2out;
                              p_seg2h;
                              p_seg4out;
                              p_seg4l;
                          }
                                      //LED_POWER();
                      //    break;    
                      //case 5 :    //LED6 25
                          if(b_dis_r18 & 0x20)
                          {
                              p_seg2out;
                              p_seg2h;
                              p_seg5out;
                              p_seg5l;
                          }
                                      LED_POWER();
                          break;   
                      //case 6 :    //LED7 42
                      //case 7 :    //LED8 52
                              case 3 :
                          if(b_dis_r18 & 0x40)
                          {
                              p_seg4out;
                              p_seg4h;
                              p_seg2out;
                              p_seg2l;
                          }
                                      LED_POWER();
                      //    break;   
                      //case 7 :    //LED8 52
                          if(b_dis_r18 & 0x80)
                          {
                              p_seg5out;
                              p_seg5h;
                              p_seg2out;
                              p_seg2l;
                          }
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 32  

                                      LED_POWER();
                          break;   
                      //case 8 :    //LED9 34
                      //case 9 :    //LED10 35
                              case 4 :
                          if(b_dis_r28 & 0x01)
                          {
                              p_seg3out;
                              p_seg3h;
                              p_seg4out;
                              p_seg4l;
                          }
                                      LED_POWER();
                      //    break; 
                      //case 9 :    //LED10 35
                          if(b_dis_r28 & 0x02)
                          {
                              p_seg3out;
                              p_seg3h;
                              p_seg5out;
                              p_seg5l;
                          }
                                      LED_POWER();
                          break; 
                      //case 10 :    //LED11 43
                      //case 11 :    //LED12 53
                              case 5 :
                          if(b_dis_r28 & 0x04)
                          {
                              p_seg4out;
                              p_seg4h;
                              p_seg3out;
                              p_seg3l;
                          }
                                      LED_POWER();
                      //    break; 
                      //case 11 :    //LED12 53
                          if(b_dis_r28 & 0x08)
                          {
                              p_seg5out;
                              p_seg5h;
                              p_seg3out;
                              p_seg3l;
                          }
                                      LED_POWER();
                                      
                          break; 
                      case 12 :    //LED13 X6
                      //case 13 :    //LED14 X7
                          if(b_dis_r28 & 0x10)
                          {
                              //p_seg5out;
                              //p_seg5h;
                              p_seg6out;
                              p_seg6l;
                          }
                                      if(b_dis_r28 & 0x20)
                          {
                              //p_seg5out;
                              //p_seg5h;
                              p_seg7out;
                              p_seg7l;
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 33  

                          }    
              
              
                                      break; 
                      case 13 :    //LED14 X7
                          if(b_dis_r28 & 0x20)
                          {
                              //p_seg5out;
                              //p_seg5h;
                              p_seg7out;
                              p_seg7l;
                          }        
                                      if(b_dis_r28 & 0x10)
                          {
                              //p_seg5out;
                              //p_seg5h;
                              p_seg6out;
                              p_seg6l;
                          }
              
                          break; 
              
                      default :
                          b_disp_buf = 0x00;
                          break;
                  }
              #endif
2004   1      
2005   1      
2006   1      
2007   1      #if     c_disp_comcom2_qi
2008   1      
2009   1      
2010   1          unsigned char b_disp_buf=0;
2011   1      
2012   1          //用到的口都置为输入
2013   1          p_seg1in;
2014   1          p_seg2in;
2015   1          p_seg3in;
2016   1          p_seg4in;
2017   1          p_seg5in;
2018   1          p_seg6in;
2019   1          p_seg7in;
2020   1          p_seg8in;
2021   1          p_seg9in;
2022   1          p_seg10in;  
2023   1      
2024   1          b_disp_status ++;
2025   1          if(b_disp_status>=c_ledScan_cnt)
2026   1              b_disp_status=0;
2027   1      
2028   1      
2029   1          switch (b_disp_status)
2030   1          {
2031   2                      /*SMG1*/
2032   2                      case 0 :    //A 51
2033   2                  if(b_dis_r18 & 0x01)
2034   2                  {
2035   3                      p_seg5out;
2036   3                      p_seg5h;
2037   3                      p_seg1out;
2038   3                      p_seg1l;
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 34  

2039   3                  }
2040   2                              break;
2041   2                      case 1:         //B 52
2042   2                  if(b_dis_r18 & 0x02)
2043   2                  {
2044   3                      p_seg5out;
2045   3                      p_seg5h;
2046   3                      p_seg2out;
2047   3                      p_seg2l;
2048   3                  }
2049   2                  break;
2050   2                      case 2 :        //C 53 
2051   2                  if(b_dis_r18 & 0x04)
2052   2                  {
2053   3                      p_seg5out;
2054   3                      p_seg5h;
2055   3                      p_seg3out;
2056   3                      p_seg3l;
2057   3                  }
2058   2                              break;
2059   2                      case 3 :        //D 54
2060   2                  if(b_dis_r18 & 0x08)
2061   2                  {
2062   3                      p_seg5out;
2063   3                      p_seg5h;
2064   3                      p_seg4out;
2065   3                      p_seg4l;
2066   3                  }
2067   2                  break;         
2068   2      
2069   2                      case 4 :        //E 15  
2070   2                  if(b_dis_r18 & 0x10)
2071   2                  {
2072   3                      p_seg1out;
2073   3                      p_seg1h;
2074   3                      p_seg5out;
2075   3                      p_seg5l;
2076   3                  }
2077   2                              break;
2078   2                      case 5 :        //F 25
2079   2                  if(b_dis_r18 & 0x20)
2080   2                  {
2081   3                      p_seg2out;
2082   3                      p_seg2h;
2083   3                      p_seg5out;
2084   3                      p_seg5l;
2085   3                  }
2086   2                  break;   
2087   2                      case 6 :        //G 35  
2088   2                  if(b_dis_r18 & 0x40)
2089   2                  {
2090   3                      p_seg3out;
2091   3                      p_seg3h;
2092   3                      p_seg5out;
2093   3                      p_seg5l;
2094   3                  }
2095   2                              break;
2096   2                      case 7 :        //H 45
2097   2                  if(b_dis_r18 & 0x80)
2098   2                  {
2099   3                      p_seg4out;
2100   3                      p_seg4h;
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 35  

2101   3                      p_seg5out;
2102   3                      p_seg5l;
2103   3                  }
2104   2                  break;   
2105   2      
2106   2                      /*数码管2*/
2107   2                      case 8:         //A     61
2108   2                  if(b_dis_r28 & 0x01)
2109   2                  {
2110   3                      p_seg6out;
2111   3                      p_seg6h;
2112   3                      p_seg1out;
2113   3                      p_seg1l;
2114   3                  }
2115   2                              break;
2116   2                      case 9:         //B 62
2117   2                  if(b_dis_r28 & 0x02)
2118   2                  {
2119   3                      p_seg6out;
2120   3                      p_seg6h;
2121   3                      p_seg2out;
2122   3                      p_seg2l;
2123   3                  }
2124   2                  break; 
2125   2                      case 10 :       //C 63  
2126   2                  if(b_dis_r28 & 0x04)
2127   2                  {           
2128   3                      p_seg6out;
2129   3                      p_seg6h;
2130   3                      p_seg3out;
2131   3                      p_seg3l;
2132   3                  }
2133   2                              break;
2134   2                      case 11:        //D 64
2135   2                  if(b_dis_r28 & 0x08)
2136   2                  {
2137   3                      p_seg6out;
2138   3                      p_seg6h;
2139   3                      p_seg4out;
2140   3                      p_seg4l;
2141   3                  }
2142   2                  break; 
2143   2                      case 12:        //E 16
2144   2                  if(b_dis_r28 & 0x10)
2145   2                  {
2146   3                      p_seg1out;
2147   3                      p_seg1h;
2148   3                      p_seg6out;
2149   3                      p_seg6l;
2150   3                  }
2151   2                  break; 
2152   2                      case 13:        //F 26
2153   2                  if(b_dis_r28 & 0x20)
2154   2                  {
2155   3                      p_seg2out;
2156   3                      p_seg2h;
2157   3                      p_seg6out;
2158   3                      p_seg6l;
2159   3                  }
2160   2                  break; 
2161   2                      case 14:        //G 36
2162   2                  if(b_dis_r28 & 0x40)
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 36  

2163   2                  {
2164   3                      p_seg3out;
2165   3                      p_seg3h;
2166   3                      p_seg6out;
2167   3                      p_seg6l;
2168   3                  }
2169   2                  break; 
2170   2                      case 15:        //H 46
2171   2                  if(b_dis_r28 & 0x80)
2172   2                  {
2173   3                      p_seg4out;
2174   3                      p_seg4h;
2175   3                      p_seg6out;
2176   3                      p_seg6l;
2177   3                  }
2178   2                  break; 
2179   2                      /*数码管3*/
2180   2                      case 16:                //A     71
2181   2                  if(b_dis_r38 & 0x01)
2182   2                  {
2183   3                      p_seg7out;
2184   3                      p_seg7h;
2185   3                      p_seg1out;
2186   3                      p_seg1l;
2187   3                  }
2188   2                              break;
2189   2                      case 17:                //B 72
2190   2                  if(b_dis_r38 & 0x02)
2191   2                  {
2192   3                      p_seg7out;
2193   3                      p_seg7h;
2194   3                      p_seg2out;
2195   3                      p_seg2l;
2196   3                  }
2197   2                  break; 
2198   2                      case 18 :       //C 73
2199   2                  if(b_dis_r38 & 0x04)
2200   2                  {           
2201   3                      p_seg7out;
2202   3                      p_seg7h;
2203   3                      p_seg3out;
2204   3                      p_seg3l;
2205   3                  }
2206   2                              break;
2207   2                      case 19:        //D 74
2208   2                  if(b_dis_r38 & 0x08)
2209   2                  {
2210   3                      p_seg7out;
2211   3                      p_seg7h;
2212   3                      p_seg4out;
2213   3                      p_seg4l;
2214   3                  }
2215   2                  break; 
2216   2                      case 20:        //E 17
2217   2                  if(b_dis_r38 & 0x10)
2218   2                  {
2219   3                      p_seg1out;
2220   3                      p_seg1h;
2221   3                      p_seg7out;
2222   3                      p_seg7l;
2223   3                  }
2224   2                  break; 
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 37  

2225   2                      case 21:        //F 27
2226   2                  if(b_dis_r38 & 0x20)
2227   2                  {
2228   3                      p_seg2out;
2229   3                      p_seg2h;
2230   3                      p_seg7out;
2231   3                      p_seg7l;
2232   3                  }
2233   2                  break; 
2234   2                      case 22:        //G 37
2235   2                  if(b_dis_r38 & 0x40)
2236   2                  {
2237   3                      p_seg3out;
2238   3                      p_seg3h;
2239   3                      p_seg7out;
2240   3                      p_seg7l;
2241   3                  }
2242   2                  break; 
2243   2                      case 23:        //H 47
2244   2                  if(b_dis_r38 & 0x80)
2245   2                  {
2246   3                      p_seg4out;
2247   3                      p_seg4h;
2248   3                      p_seg7out;
2249   3                      p_seg7l;
2250   3                  }
2251   2                  break; 
2252   2                      /*数码管4*/
2253   2                      case 24:                //A     81
2254   2                  if(b_dis_r48 & 0x01)
2255   2                  {
2256   3                      p_seg8out;
2257   3                      p_seg8h;
2258   3                      p_seg1out;
2259   3                      p_seg1l;
2260   3                  }
2261   2                              break;
2262   2                      case 25:                //B 82
2263   2                  if(b_dis_r48 & 0x02)
2264   2                  {
2265   3                      p_seg8out;
2266   3                      p_seg8h;
2267   3                      p_seg2out;
2268   3                      p_seg2l;
2269   3                  }
2270   2                  break; 
2271   2                      case 26 :       //C 83
2272   2                  if(b_dis_r48 & 0x04)
2273   2                  {           
2274   3                      p_seg8out;
2275   3                      p_seg8h;
2276   3                      p_seg3out;
2277   3                      p_seg3l;
2278   3                  }
2279   2                              break;
2280   2                      case 27:        //D 84
2281   2                  if(b_dis_r48 & 0x08)
2282   2                  {
2283   3                      p_seg8out;
2284   3                      p_seg8h;
2285   3                      p_seg4out;
2286   3                      p_seg4l;
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 38  

2287   3                  }
2288   2                  break; 
2289   2                      case 28:        //E 18
2290   2                  if(b_dis_r48 & 0x10)
2291   2                  {
2292   3                      p_seg1out;
2293   3                      p_seg1h;
2294   3                      p_seg8out;
2295   3                      p_seg8l;
2296   3                  }
2297   2                  break; 
2298   2                      case 29:        //F 28
2299   2                  if(b_dis_r48 & 0x20)
2300   2                  {
2301   3                      p_seg2out;
2302   3                      p_seg2h;
2303   3                      p_seg8out;
2304   3                      p_seg8l;
2305   3                  }
2306   2                  break; 
2307   2                      case 30:        //G 38
2308   2                  if(b_dis_r48 & 0x40)
2309   2                  {
2310   3                      p_seg3out;
2311   3                      p_seg3h;
2312   3                      p_seg8out;
2313   3                      p_seg8l;
2314   3                  }
2315   2                  break; 
2316   2                      case 31:        //H 48
2317   2                  if(b_dis_r48 & 0x80)
2318   2                  {
2319   3                      p_seg4out;
2320   3                      p_seg4h;
2321   3                      p_seg8out;
2322   3                      p_seg8l;
2323   3                  }
2324   2                  break; 
2325   2      
2326   2                      /*LED灯*/
2327   2                      case 32:        //LED1 89
2328   2                  if(b_dis_r58 & 0x01)
2329   2                  {
2330   3                      p_seg8out;
2331   3                      p_seg8h;
2332   3                      p_seg9out;
2333   3                      p_seg9l;
2334   3                  }
2335   2                  break; 
2336   2                      case 33:        //LED2 3A
2337   2                  if(b_dis_r58 & 0x02)
2338   2                  {
2339   3                      p_seg3out;
2340   3                      p_seg3h;
2341   3                      p_seg10out;
2342   3                      p_seg10l;
2343   3                  }
2344   2                  break; 
2345   2                      case 34:        //LED3 59
2346   2                  if(b_dis_r58 & 0x04)
2347   2                  {
2348   3                      p_seg5out;
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 39  

2349   3                      p_seg5h;
2350   3                      p_seg9out;
2351   3                      p_seg9l;
2352   3                  }
2353   2                  break; 
2354   2                      case 35:        //LED4 79
2355   2                  if(b_dis_r58 & 0x08)
2356   2                  {
2357   3                      p_seg7out;
2358   3                      p_seg7h;
2359   3                      p_seg9out;
2360   3                      p_seg9l;
2361   3                  }
2362   2                  break; 
2363   2                      case 36:        //LED5 2A
2364   2                  if(b_dis_r58 & 0x10)
2365   2                  {
2366   3                      p_seg2out;
2367   3                      p_seg2h;
2368   3                      p_seg10out;
2369   3                      p_seg10l;
2370   3                  }
2371   2                  break; 
2372   2                      case 37:        //LED6 69
2373   2                  if(b_dis_r58 & 0x20)
2374   2                  {
2375   3                      p_seg6out;
2376   3                      p_seg6h;
2377   3                      p_seg9out;
2378   3                      p_seg9l;
2379   3                  }
2380   2                  break; 
2381   2      
2382   2      
2383   2              default :
2384   2                  b_disp_buf = 0x00;
2385   2                  break;
2386   2          }
2387   1      #endif
2388   1      
2389   1      }
2390          
2391          
2392          /*数码管定时显示1*/
2393          void    smg_deal_dingshi_1()
2394          {
2395   1              /*设置状态下闪烁*/
2396   1              /*第一秒不闪*/
2397   1              if(gf_flash || b_mjs_set_sec<1) 
2398   1              {
2399   2                      //显示现在档位或时间
2400   2                      //功能1 6显示档位,功能2 3 4 5显示时间
2401   2                      if(b_mode==1 || b_mode==6)
2402   2                      {
2403   3                              //显示档位
2404   3                              b_r18=0;
2405   3                              b_r28=0;
2406   3                              b_r38=17;       //P
2407   3                              b_r48=b_grade;
2408   3                              f_dp=1;  //显示小数点
2409   3                      }
2410   2                      /*功能2 3 最大值1小时,显示60分钟*/
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 40  

2411   2                      else if(b_mode==2 || b_mode==3)
2412   2                      {
2413   3                              uchar b_temp1=  b_dingshi_min+b_dingshi_hour*60;
2414   3                              
2415   3                              //显示时间
2416   3                              b_r18 = 0;
2417   3                              b_r28 = 0;                      
2418   3                              b_r38 = b_temp1/10;
2419   3                              b_r48 = b_temp1%10;
2420   3                              f_dp  = 1;  //显示小数点
2421   3                      }
2422   2                      /*功能4 按小时,分钟显示*/
2423   2                      else if(b_mode==4)
2424   2                      {
2425   3                              //显示时间
2426   3                              b_r18 = b_dingshi_hour/10;;
2427   3                              b_r28 = b_dingshi_hour%10;                      
2428   3                              b_r38 = b_dingshi_min/10;
2429   3                              b_r48 = b_dingshi_min%10;
2430   3                              f_dp  = 1;  //显示小数点
2431   3                      }
2432   2                      /*功能5 这里的时间快60s=1min */
2433   2                      else if(b_mode==5)
2434   2                      {
2435   3                              b_r18 = b_dingshi_hour/10;;
2436   3                              b_r28 = b_dingshi_hour%10;                      
2437   3                              b_r38 = b_dingshi_min/10;
2438   3                              b_r48 = b_dingshi_min%10;
2439   3                              f_dp  = 1;  //显示小数点
2440   3                      }
2441   2                      //显示保温
2442   2                      else if(b_mode == 0x80)
2443   2                      {
2444   3                              ////显示bb
2445   3                              //b_r18=0x0b;
2446   3                              //b_r28=0x0b;
2447   3      
2448   3                              if (b_set_wendu<100)
2449   3                              {
2450   4                                      //设置状态下,显示温度
2451   4                                      b_r18 = 0x10;   //不显示
2452   4                                      b_r28 = b_set_wendu/10;
2453   4                                      b_r38 = b_set_wendu%10;
2454   4                                      b_r48 = 0x0c;
2455   4                              }
2456   3                              else
2457   3                              {
2458   4                                      //设置状态下,显示温度
2459   4                                      b_r18 = b_set_wendu/100;
2460   4                                      b_r28 = b_set_wendu/10%10;
2461   4                                      b_r38 = b_set_wendu%10;
2462   4                                      b_r48 = 0x0c;
2463   4                              }
2464   3                              
2465   3      
2466   3                      }
2467   2              }
2468   1      }
2469          
2470          
2471          /*数码管定时显示2*/
2472          void    smg_deal_dingshi_2()
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 41  

2473          {
2474   1              
2475   1              //显示现在档位或时间
2476   1              //功能1 6显示档位,功能2 3 4 5显示时间
2477   1              if(b_mode==1 || b_mode==6)
2478   1              {
2479   2                      //显示档位
2480   2                      b_r18=0;
2481   2                      b_r28=0;
2482   2                      b_r38=17;       //P
2483   2                      b_r48=b_grade;
2484   2                      //if(gf_flash)
2485   2                              f_dp=1;  //显示小数点
2486   2      
2487   2                      ///*测试*/
2488   2                      //if(b_mode==1)
2489   2                      //{
2490   2                      //      b_r18 = gb_wendu/16;
2491   2                      //      b_r28 = gb_wendu%16;
2492   2                      //      b_r38 = b_kkg_buf/10;
2493   2                      //      b_r48 = b_kkg_buf%10;
2494   2                      //      if(gf_flash)
2495   2                      //              b_r48 = b_wendu_ok;
2496   2                      //}
2497   2      
2498   2      
2499   2      
2500   2              }
2501   1              /*功能2 3 最大值1小时,显示60分钟*/
2502   1              else if(b_mode==2 || b_mode==3)
2503   1              {
2504   2                      uchar b_temp1=  b_dingshi_min+b_dingshi_hour*60;
2505   2                      
2506   2                      //显示时间
2507   2                      b_r18 = 0;
2508   2                      b_r28 = 0;                      
2509   2                      b_r38 = b_temp1/10;
2510   2                      b_r48 = b_temp1%10;
2511   2      
2512   2                      if (f_dingshi_begin && gf_flash)
2513   2                      {
2514   3                              f_dp  = 1;  //显示小数点
2515   3                      }
2516   2                      
2517   2                      
2518   2              }
2519   1              /*功能4 按小时,分钟显示*/
2520   1              else if(b_mode==4)
2521   1              {
2522   2                      //显示时间
2523   2                      b_r18 = b_dingshi_hour/10;;
2524   2                      b_r28 = b_dingshi_hour%10;                      
2525   2                      b_r38 = b_dingshi_min/10;
2526   2                      b_r48 = b_dingshi_min%10;
2527   2                      f_dp  = 1;  //显示小数点
2528   2      
2529   2                      if (f_dingshi_begin && gf_flash)
2530   2                      {
2531   3                              f_dp  = 1;  //显示小数点
2532   3                      }
2533   2              }
2534   1              /*功能5 这里的时间快60s=1min */
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 42  

2535   1              else if(b_mode==5)
2536   1              {
2537   2                      b_r18 = b_dingshi_hour/10;;
2538   2                      b_r28 = b_dingshi_hour%10;                      
2539   2                      b_r38 = b_dingshi_min/10;
2540   2                      b_r48 = b_dingshi_min%10;
2541   2      
2542   2                      if (f_dingshi_begin && gf_flash)
2543   2                      {
2544   3                              f_dp  = 1;  //显示小数点
2545   3                      }
2546   2              }
2547   1              //显示保温
2548   1              //显示保温
2549   1              else if(b_mode == 0x80)
2550   1              {
2551   2                      ////显示bb
2552   2                      //b_r18=0x0b;
2553   2                      //b_r28=0x0b;
2554   2      
2555   2                      //运行状态下,显示时间
2556   2                      b_r18 = b_dingshi_hour/10;      
2557   2                      b_r28 = b_dingshi_hour%10;
2558   2                      b_r38 = b_dingshi_min/10;
2559   2                      b_r48 = b_dingshi_min%10;
2560   2              
2561   2                      if(gf_flash)
2562   2                              f_dp=1;  //显示小数点
2563   2      
2564   2                      //测试
2565   2                      //if(gf_flash)
2566   2                      //{
2567   2                      //      b_r18=gb_wendu/100;
2568   2                      //      b_r28=gb_wendu/10%10;
2569   2                      //      b_r38=gb_wendu%10;
2570   2                      //      b_r48=0x0c;
2571   2                      //}
2572   2      
2573   2      //              if (gb_wendu<100)
2574   2      //              {
2575   2      //                      //设置状态下,显示温度
2576   2      //                      b_r18 = 0x10;   //不显示
2577   2      //                      b_r28 = gb_wendu/10;
2578   2      //                      b_r38 = gb_wendu%10;
2579   2      //                      b_r48 = 0x0c;
2580   2      //                      if(gf_flash)
2581   2      //                              b_r48 = b_wendu_ok;
2582   2      //              }
2583   2      //              else
2584   2      //              {
2585   2      //                      b_r18 = gb_wendu/100;
2586   2      //                      b_r28 = gb_wendu/10%10;
2587   2      //                      b_r38 = gb_wendu%10;
2588   2      //                      b_r48 = 0x0c;
2589   2      //                      if(gf_flash)
2590   2      //                              b_r48 = b_wendu_ok;
2591   2      //              }
2592   2      
2593   2      
2594   2              }
2595   1              
2596   1      }
C51 COMPILER V9.60.0.0   DISPLAY                                                           05/09/2023 16:49:07 PAGE 43  

2597          
2598          /*数码管预约显示1*/
2599          void    smg_deal_yuyue_1()
2600          {
2601   1              //不在设置状态,闪烁时间点
2602   1              //在设置转态,常亮时间点
2603   1              if(f_mjs_set)
2604   1              {       
2605   2                      if(gf_flash)
2606   2                      {
2607   3                              //显示预约时间
2608   3                      b_r18=b_yuyue_hour/10;
2609   3                      b_r28=b_yuyue_hour%10;  
2610   3                              b_r38=b_yuyue_min/10;
2611   3                              b_r48=b_yuyue_min%10; //H
2612   3                              f_dp=1; 
2613   3                      }
2614   2              }       
2615   1              else
2616   1              {
2617   2                      ////显示预约时间
2618   2              //b_r18=b_yuyue_hour/10;
2619   2              //b_r28=b_yuyue_hour%10;
2620   2              //if(gf_flash)
2621   2              //    f_dp=1;  
2622   2      
2623   2                      //显示预约时间
2624   2              b_r18=b_yuyue_hour/10;
2625   2              b_r28=b_yuyue_hour%10;  
2626   2                      b_r38=b_yuyue_min/10;
2627   2                      b_r48=b_yuyue_min%10; //H
2628   2      
2629   2                      /*预约倒计时时,点闪烁*/
2630   2                      if(gf_flash)
2631   2                              f_dp=1; 
2632   2              }
2633   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   2211    ----
   CONSTANT SIZE    =     21    ----
   XDATA SIZE       =     12       3
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     11       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      7    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
